<section class="breadcrumb my-3 my-lg-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-2 text-center mb-1">
        <a href="javascript:void(0)"><span class="fw-bold text-primary">Shopping Cart</span></a>
      </div>
      <div class="col-1 d-none d-lg-block text-center">
        <span class="iconify text-grey" data-icon="ion:chevron-right"></span>
      </div>
      <div class="col-12 col-lg-3 text-center mb-1">
        <span class="iconify text-grey me-2 mb-2 d-inline d-lg-none" data-icon="ion:chevron-right"></span>
        <a href="javascript:void(0)"><span class="fw-bold">Procced To Checkout</span></a>
      </div>
      <div class="col-1 d-none d-lg-block text-center">
        <span class="iconify text-grey" data-icon="ion:chevron-right"></span>
      </div>
      <div class="col-12 col-lg-2 text-center mb-1">
        <span class="iconify text-grey me-2 mb-2 d-inline d-lg-none" data-icon="ion:chevron-right"></span>
        <a href="javascript:void(0)"><span class="fw-bold">Order Complete</span></a>
      </div>
    </div>
  </div>
</section>

<section class="cart mb-5 mb-lg-5 pb-lg-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <ul class="list-group">
          <li class="list-group-item py-3" *ngFor="let item of listData; index as i">
            <div class="d-flex justify-content-between">
              <div class="row">
                <div class="col-4 pe-0" style="min-width: 100px;">
                  <img [src]="item.foto" class="object-fit-cover img-product" width="80" height="80" alt="gambar product">
                  <!-- <img src="https://source.unsplash.com/random/100x100?camera={{i}}" class="object-fit-cover img-product" width="80" height="80" alt="gambar product"> -->
                </div>
                <div class="col">
                  <p class="font-p mt-sm-4 mb-0" style="font-size: 14px;">{{ item.nama }}</p>
                  <span>{{ item.quantity }} x {{ item.harga | number }}</span>
                  <span class="font-p fw-semibold d-block d-sm-none">Rp {{ item.harga * item.quantity | number }}</span>
                  <div class="d-flex justify-content-between d-sm-none mt-3">
                    <button class="btn me-3 mt-2" role="button" (click)="deleteCart(item.id)">
                      <span class="iconify text-grey" data-icon="fa6-regular:trash-can"></span>
                    </button>
                    <div class="d-flex align-items-center">
                      <button class="btn btn-sm border border-end-0 rounded-0 p-1 align-middle" [disabled]="loading" (click)="reduceTotal(i)">
                        <span class="iconify" data-icon="mdi-light:minus"></span>
                      </button>
                      <input type="text" 
                        class="form-control form-control-sm border rounded-0 p-1 align-middle fw-bold text-center" 
                        [(ngModel)]="item.quantity" 
                        name="quantity_{{i}}" 
                        oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                        (change)="changeQuantity(i)" 
                        style="width: 50px;"
                        [disabled]="loading"
                      >
                      <button class="btn btn-sm border border-start-0 rounded-0 p-1 align-middle" [disabled]="loading" (click)="addTotal(i)">
                        <span class="iconify" data-icon="mdi-light:plus"></span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-none d-sm-flex flex-column">
                <p class="font-p fw-bold fs-6 text-end my-3 d-none d-sm-block">Rp {{ item.harga * item.quantity | number }}</p>
                <div class="d-flex align-items-center">
                  <button class="btn d-none d-sm-block me-3" role="button" (click)="deleteCart(item.id)">
                    <span class="iconify fs-5 text-grey" data-icon="fa6-regular:trash-can"></span>
                  </button>
                  <div class="d-flex align-items-center">
                    <button class="btn border border-end-0 rounded-0 p-1 align-middle" [disabled]="loading" (click)="reduceTotal(i)">
                      <span class="iconify" data-icon="mdi-light:minus"></span>
                    </button>
                    <input type="text" 
                      class="form-control border rounded-0 p-1 align-middle fw-bold text-center" 
                      [(ngModel)]="item.quantity" 
                      name="quantity_{{i}}" 
                      oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                      (change)="changeQuantity(i)" 
                      style="width: 50px;"
                      [disabled]="loading"
                    >
                    <button class="btn border border-start-0 rounded-0 p-1 align-middle" [disabled]="loading" (click)="addTotal(i)">
                      <span class="iconify" data-icon="mdi-light:plus"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
        <a href="javascript:void(0)" routerLink="/katalog" class="btn btn-sm btn-light fw-bold rounded-0 px-3 py-2 px-lg-4 py-lg-3 mt-3">CONTINUE SHOPPING</a>
        <div class="form-group mt-4">
          <label for="inputState" class="form-label text-grey">Special instructions for seller</label>
          <textarea type="text" class="form-control px-2 py-2" rows="5"></textarea>
        </div>
      </div>
      <div class="col-lg-4 mt-3 mt-lg-0">
        <div class="cart-total border border-2 border-secondary border-opacity-10 py-4">
          <div class="title fs-6 fw-bold px-2 px-lg-3">CART TOTALS</div>
          <div class="body px-3 px-lg-4 mt-4">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fw-bold" style="font-size: 14px;">Subtotal</span> 
              <span>Rp {{ subTotal | number }}</span>
            </div>
            <hr>
            <div class="fs-6 fw-bold">Estimate Shipping and Tax</div>
            <p class="text-grey">Enter your destination to get a shipping estimate.</p>
            <div class="form-group mb-3">
              <label for="country" class="form-label text-grey">Country</label>
              <select id="country" class="form-select form-select-sm px-2 py-2">
                <option selected>Choose...</option>
                <option>Indonesia</option>
                <option>Malaysia</option>
              </select>
            </div>
            <div class="form-group mb-3">
              <label for="zip" class="form-label text-grey">Postal Code</label>
              <input id="zip" type="text" class="form-control form-control-sm px-2 py-2">
            </div>
            <button class="btn btn-sm btn-light fw-bold rounded-0 px-3 py-2 mb-2">GET A QUOTE</button>
            <hr>
            <div class="d-flex justify-content-between align-items-center">
              <span class="fw-semibold fs-6">Total</span> 
              <span class="fw-bold fs-6"> Rp {{ grandTotal | number }}</span>
            </div>
            <a class="btn btn-dark w-100 rounded-0 fw-bold py-2 py-lg-3 mt-4" href="javascript:void(0)" routerLink="/checkout">
              PROCCED TO CHECKOUT
              <span class="iconify ms-1 mb-1 fs-5" data-icon="lucide:arrow-right"></span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<app-footer></app-footer>
